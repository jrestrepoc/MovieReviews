
{% extends 'base.html' %}

{% block content %}
<style>
    .statistics-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        text-align: center;
    }
    
    .chart-container {
        background-color: #ffffff;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        margin: 20px auto;
        padding: 20px;
        display: inline-block;
        max-width: 100%;
    }
    
    .chart-image {
        max-width: 100%;
        height: auto;
        display: block;
        margin: 0 auto;
        border-radius: 5px;
    }
    
    .chart-title {
        color: #333;
        font-size: 2rem;
        margin-bottom: 20px;
        font-weight: bold;
    }
    
    .chart-subtitle {
        color: #666;
        font-size: 1.1rem;
        margin-bottom: 30px;
        line-height: 1.5;
    }
    
    @media (max-width: 768px) {
        .statistics-container {
            padding: 10px;
        }
        
        .chart-title {
            font-size: 1.5rem;
        }
        
        .chart-subtitle {
            font-size: 1rem;
        }
        
        .chart-container {
            margin: 10px auto;
            padding: 15px;
        }
    }
    
    @media (max-width: 480px) {
        .chart-title {
            font-size: 1.3rem;
        }
        
        .chart-container {
            padding: 10px;
        }
    }
</style>

<div class="statistics-container">
    <h1 class="chart-title">Movie Statistics Dashboard</h1>
    <p class="chart-subtitle">
        Analysis of movies by year and genre distribution.<br>
        Data shows the number of movies released per year and categorized by their primary genre.
    </p>
    
    <div class="chart-container">
        {% if graphic %}
            <img src="data:image/png;base64,{{ graphic }}" alt="Movies Statistics Charts" class="chart-image">
        {% else %}
            <p style="color: #888; font-style: italic;">No data available for chart generation.</p>
        {% endif %}
    </div>
    
    <!-- Información adicional sobre los datos -->
    <div style="margin-top: 30px; text-align: left; max-width: 800px; margin-left: auto; margin-right: auto;">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
            {% if year_data %}
            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                <h3 style="color: #495057; margin-bottom: 10px;">Years with Most Movies:</h3>
                <ul style="list-style-type: none; padding: 0;">
                    {% for year, count in year_data.items %}
                        {% if forloop.counter <= 5 %}
                        <li style="margin-bottom: 5px; color: #6c757d;">
                            <strong>{{ year }}:</strong> {{ count }} movie{{ count|pluralize }}
                        </li>
                        {% endif %}
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
            
            {% if genre_data %}
            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                <h3 style="color: #495057; margin-bottom: 10px;">Most Popular Genres:</h3>
                <ul style="list-style-type: none; padding: 0;">
                    {% for genre, count in genre_data.items %}
                        {% if forloop.counter <= 5 %}
                        <li style="margin-bottom: 5px; color: #6c757d;">
                            <strong>{{ genre }}:</strong> {{ count }} movie{{ count|pluralize }}
                        </li>
                        {% endif %}
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
        </div>
    </div>
</div>

<script>
    // Hacer que las imágenes sean más interactivas
    document.addEventListener('DOMContentLoaded', function() {
        const chartImage = document.querySelector('.chart-image');
        if (chartImage) {
            chartImage.addEventListener('click', function() {
                // Crear modal para ver la imagen en tamaño completo
                const modal = document.createElement('div');
                modal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.8);
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    z-index: 9999;
                    cursor: pointer;
                `;
                
                const fullImage = document.createElement('img');
                fullImage.src = this.src;
                fullImage.style.cssText = `
                    max-width: 95%;
                    max-height: 95%;
                    object-fit: contain;
                `;
                
                modal.appendChild(fullImage);
                document.body.appendChild(modal);
                
                modal.addEventListener('click', function() {
                    document.body.removeChild(modal);
                });
            });
            
            // Añadir efecto hover
            chartImage.style.cursor = 'pointer';
            chartImage.title = 'Click to view full size';
        }
    });
</script>
{% endblock content %}